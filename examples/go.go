package main

import . "github.com/fogleman/pt/pt"

func main() {
	scene := Scene{}
	// scene.SetColor(Color{1, 1, 1})
	texture, err := LoadTexture("/Users/fogleman/Desktop/out.png")
	if err != nil {
		panic(err)
	}
	scene.SetTexture(texture)
	black := GlossyMaterial(Color{0, 0, 0}, 2, Radians(0))
	white := GlossyMaterial(Color{1, 1, 1}, 2, Radians(0))
	for _, p := range blackPositions {
		m := Scale(Vector{0.45, 0.1, 0.45}).Translate(Vector{p[0] - 9.5, 0, p[1] - 9.5})
		scene.Add(NewTransformedShape(NewSphere(Vector{}, 1, black), m))
	}
	for _, p := range whitePositions {
		m := Scale(Vector{0.45, 0.1, 0.45}).Translate(Vector{p[0] - 9.5, 0, p[1] - 9.5})
		scene.Add(NewTransformedShape(NewSphere(Vector{}, 1, white), m))
	}
	for i := 0; i < 19; i++ {
		x := float64(i) - 9.5
		m := 0.01
		scene.Add(NewCube(Vector{x - m, -1, -9.5}, Vector{x + m, -0.09, 8.5}, black))
		scene.Add(NewCube(Vector{-9.5, -1, x - m}, Vector{8.5, -0.09, x + m}, black))
	}
	material := GlossyMaterial(HexColor(0xEFECCA), 1.1, Radians(45))
	scene.Add(NewCube(Vector{-100, -100, -100}, Vector{100, -0.1, 100}, material))
	// scene.Add(NewSphere(Vector{0, 50, 0}, 1, LightMaterial(Color{1, 1, 1}, 1, NoAttenuation)))
	camera := LookAt(Vector{0, 30, 5}, Vector{0, 0, 0}, Vector{0, 1, 0}, 40)
	IterativeRender("out%03d.png", 10000, &scene, &camera, 1024, 1024, -1, 9, 4)
}

var blackPositions = [][]float64{
	{15, 3},
	{2, 3},
	{14, 15},
	{13, 16},
	{2, 13},
	{12, 15},
	{8, 16},
	{7, 3},
	{4, 3},
	{3, 2},
	{13, 2},
	{4, 15},
	{3, 10},
	{2, 10},
	{4, 9},
	{5, 8},
	{5, 7},
	{5, 10},
	{6, 6},
	{6, 5},
	{12, 3},
	{13, 1},
	{7, 2},
	{15, 9},
	{14, 9},
	{13, 8},
	{12, 7},
	{12, 6},
	{13, 9},
	{11, 8},
	{13, 3},
	{11, 5},
	{12, 4},
	{11, 7},
	{10, 10},
	{9, 8},
	{7, 9},
	{7, 4},
	{5, 2},
	{9, 9},
	{10, 7},
	{12, 11},
	{14, 11},
	{15, 10},
	{16, 10},
	{10, 9},
	{17, 10},
	{15, 6},
	{2, 15},
	{14, 4},
	{18, 10},
	{7, 6},
	{10, 12},
	{5, 9},
	{10, 11},
	{5, 11},
	{2, 7},
	{4, 1},
	{3, 6},
	{4, 13},
	{3, 5},
	{8, 12},
	{1, 13},
	{6, 3},
	{7, 5},
	{1, 7},
	{7, 14},
	{14, 17},
	{3, 13},
	{15, 17},
	{17, 5},
	{16, 5},
	{6, 17},
	{18, 4},
	{17, 3},
	{1, 10},
	{2, 11},
	{8, 13},
	{5, 17},
	{4, 18},
	{0, 7},
	{10, 3},
	{10, 2},
	{6, 10},
	{16, 7},
	{16, 18},
	{14, 7},
	{14, 5},
	{13, 8},
	{14, 14},
}

var whitePositions = [][]float64{
	{3, 15},
	{16, 15},
	{14, 16},
	{15, 16},
	{5, 16},
	{15, 14},
	{4, 2},
	{2, 6},
	{2, 9},
	{1, 15},
	{16, 8},
	{4, 14},
	{5, 15},
	{3, 9},
	{4, 8},
	{4, 7},
	{1, 9},
	{5, 6},
	{5, 5},
	{12, 2},
	{11, 2},
	{8, 3},
	{9, 6},
	{15, 8},
	{14, 8},
	{13, 7},
	{13, 6},
	{12, 8},
	{12, 5},
	{13, 4},
	{12, 9},
	{12, 10},
	{13, 5},
	{16, 9},
	{8, 10},
	{6, 7},
	{6, 4},
	{5, 3},
	{10, 8},
	{11, 9},
	{9, 7},
	{13, 10},
	{14, 10},
	{15, 11},
	{13, 11},
	{8, 8},
	{14, 12},
	{16, 11},
	{2, 14},
	{17, 11},
	{17, 9},
	{8, 9},
	{6, 8},
	{9, 11},
	{6, 11},
	{6, 12},
	{4, 4},
	{1, 6},
	{4, 6},
	{5, 14},
	{3, 7},
	{7, 10},
	{8, 5},
	{5, 4},
	{8, 7},
	{2, 8},
	{6, 14},
	{17, 6},
	{2, 16},
	{16, 17},
	{16, 6},
	{9, 2},
	{18, 5},
	{18, 6},
	{1, 11},
	{0, 10},
	{7, 13},
	{7, 15},
	{4, 17},
	{3, 18},
	{0, 8},
	{8, 4},
	{10, 1},
	{8, 1},
	{17, 7},
	{17, 18},
	{18, 11},
	{18, 9},
	{13, 9},
	{9, 15},
}
